{
  "$schema": "../../_canonical_schemas/workflow.schema.json",
  "workflow_id": "workflow-creation",
  "name": "workflow-creation",
  "display_name": "Workflow Creation Workflow",
  "version": "1.0.0",
  "description": "Meta-workflow for creating new workflow packages within the agentic-workflow-os ecosystem. A specialized team guides users through the complete workflow development lifecycle, producing complete, production-ready workflow packages that integrate seamlessly with the existing system.",
  "author": "agentic-workflow-os",
  "created": "2025-11-20",
  "updated": "2025-12-04",
  "tags": ["meta", "workflow-creation", "scaffolding", "templates"],
  "pipeline": {
    "order": ["W-00", "W-01", "W-02", "W-03", "W-04", "W-05", "W-06", "W-07", "W-08"],
    "allow_skip": false,
    "allow_parallel": false
  },
  "stages": [
    {"id": "DISCOVERY", "name": "Discovery", "description": "Understand the domain and establish foundation", "agents": ["W-00", "W-01"]},
    {"id": "DEFINITION", "name": "Definition", "description": "Define agents, artifacts, and instructions", "agents": ["W-02", "W-03", "W-04"]},
    {"id": "GENERATION", "name": "Generation", "description": "Create templates and generate files", "agents": ["W-05", "W-06", "W-08"]},
    {"id": "VALIDATION", "name": "Validation", "description": "Test and document the workflow", "agents": ["W-07", "W-08"]}
  ],
  "config": {
    "enforcement": {"mode": "strict", "checkpoint_gating": "strict", "handoff_gating": "strict"},
    "logging": {"require_session_log": true, "require_decision_log": true, "require_assumption_log": true, "require_handoff_log": true, "require_artifact_tracking": true},
    "validation": {"run_validation_commands": true, "timeout_seconds": 30},
    "bypass": {"require_reason": true, "log_bypasses": true}
  },
  "directories": {
    "root": "projects/{project_name}/",
    "artifacts": "artifacts/",
    "agent_files": "agent_files/",
    "agent_context": "agent_context/",
    "agent_log": "agent_log/",
    "docs": "docs/",
    "input": "input/",
    "package": "package/",
    "templates": "templates/workflow-creation/",
    "workflow_package": "output/workflow_package/",
    "validation": "output/validation/"
  },
  "globals": {
    "output_requirements": [
      "Use mustache `{{variable}}` NOT Jinja2 `{{ variable }}`",
      "All YAML files must be valid and follow schema",
      "Filenames must match artifact registry"
    ],
    "non_overlap_rules": [
      "Each agent handles one phase only",
      "Do not generate files for other phases",
      "Reference existing workflows for format guidance"
    ],
    "log_schema": [
      "Log File: (See `log_file` in frontmatter)",
      "Entry Types: DEFINE | VALIDATE | GENERATE | REVIEW",
      "Schema: `timestamp | entry_type | ref_ids | summary | status/outcome`"
    ],
    "context_rules": [
      "Rehydration: On startup, READ `project_index.md` → READ `context_file` → Check `exchange_log.md`",
      "Gating: Do NOT proceed if upstream HANDOFF is missing",
      "Validation: Test each file before handoff"
    ]
  },
  "display": {
    "agent_prefix": "W",
    "agent_id_format": "padded",
    "orch_id": "W-00",
    "focus": "workflow-creation",
    "base_rules": [
      "**Source of Truth:** `project_index.md` is your file registry",
      "**Inputs:** Read from paths listed in `consumes` (frontmatter)",
      "**Outputs:** Write to paths listed in `produces` (frontmatter)",
      "**Format:** Use mustache `{{variable}}` NOT Jinja2 `{{ variable }}`",
      "**Reference:** See existing workflows in `manifests/workflows/`"
    ],
    "protocol": {
      "name": "Context Protocol",
      "steps": [
        "**On Startup:** Read `project_index.md` → Read `context_file` → Check `agent_log/exchange_log.md`",
        "**Gating:** Do NOT proceed if upstream HANDOFF is missing",
        "**Checkpointing:** Update `context_file` after every significant step"
      ]
    },
    "copilot": {
      "workflow_type": "Workflow Creation",
      "tagline": "meta-workflow for building new workflow packages",
      "governance_purpose": "Format rules, validation gates",
      "startup_extras": "",
      "extra_resources": "- **Workflow Creation Guide:** `docs/workflow_creation/00_INDEX.md`\n- **Schema Reference:** `docs/WORKFLOW_CREATION_SCHEMA.md`",
      "core_rules": "1. **Follow format guides** — use exact formats from docs/workflow_creation/\n2. **Mustache templates** — `{{variable}}` NOT `{{ variable }}`\n3. **agents.yaml format** — `produces: [file.md]` NOT artifact_id refs\n4. **instructions.yaml** — root key is `agents:` NOT `instructions:`\n5. **Test before handoff** — validate each file before proceeding",
      "cycle_section": "",
      "cli_examples": "./workflow status                    # Project status\n./workflow activate <agent_id>       # Activate agent\n./workflow handoff --from W01 --to W02 --artifacts \"domain_notes.md\"",
      "on_demand_section": ""
    }
  },
  "checkpoints": [
    {
      "after_agent": "W-01",
      "type": "human",
      "prompt": "Domain Analysis Review - verify domain purpose, phases, and quality gates",
      "owner": "W-01",
      "validation_command": "",
      "timeout_seconds": 30
    },
    {
      "after_agent": "W-04",
      "type": "human",
      "prompt": "Definition Review - verify all agents defined, artifacts mapped, ownership clear",
      "owner": "W-04",
      "validation_command": "",
      "timeout_seconds": 30
    },
    {
      "after_agent": "W-07",
      "type": "human",
      "prompt": "Workflow Verified - verify tests pass, generation works, CLI commands work",
      "owner": "W-07",
      "validation_command": "./workflow validate-workflow --workflow workflow-creation",
      "timeout_seconds": 60
    }
  ],
  "cli": {
    "examples": [
      {"command": "./workflow status", "description": "Show project status"},
      {"command": "./workflow activate W01", "description": "Activate agent W01"},
      {"command": "./workflow handoff --from W01 --to W02 --artifacts \"domain_notes.md\"", "description": "Signal handoff"}
    ]
  },
  "metadata": {
    "output_directories": {
      "root": "output",
      "structure": [
        "workflow_package/",
        "agent_files/",
        "validation/"
      ]
    }
  }
}
